<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Week_14</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/agency.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="index.html"> 
                <strong>FA15 | MS<strong></a>
                
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a class="page-scroll" href="index.html">FA15|MS</a>
                    </li>
                     
                   
                    <li>
                        <a href="http://www.fabacademy.org/" target="_blank">FAB ACADEMY</a>
                    </li>
                    <li>
                        <a href="http://officinegiardino.org/" target="_blank">FAB LAB Fr</a>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
  
 
        <!-- /.row -->

            
    <!-- About Section -->
    <section id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div><h2 class="section-heading">Week 14</h2></div>
                    <div> 
                      <h2 class="section-subheading text-muted">Interface and Application Programming</h2></div><br/>
                    
                    <img width="1140" src="img/week14/cover14b.jpg">
                    <p class="featurette-image img-responsive pull-left"> <iframe width="1140" height="630" src="https://www.youtube.com/embed/swCqJd-LmtY" frameborder="0" allowfullscreen></iframe></p>
            
            
            
                    <div></div>
                </div>
            </div>
            <hr class="featurette-divider">
            <!-- First Featurette -->
            
        <div class="featurette" id="about">
            
            
            <img class="featurette-image img-responsive pull-right" src="img/week14/f1.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f2.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f3.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f5.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f6.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f4.jpg">
           <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/BXHxb7lVzxY" frameborder="0" allowfullscreen></iframe></p>
            
           
           
            
            <div>
              <h2 class="featurette-heading">Assignment purpose</h2></div>
            <p class="lead">This week the assignment was wrote an application that interfaces with an input &/or output device. </p>
<p class="lead">I chose to focus my attention on an output interface device useful for my final project. I created a computer interface to drive and to control my robot.</p>
<p class="lead">I used for the first time Python, for this reason I started studying some good tutorials and participating at the webinar of the Fab Lab Frosinone to dominate the basic commands. Then I studied on the web page of Arduino and other tutorials, the interaction between writing and reading serial.
</p>
            
                <div class="text-muted"><h3>Hardware</h3></div>

<p class="lead">The hardware part of this assignment I used:: </p> 

<p class="lead">- 2 dc motors 12 V (Recovered from a broken printer); </p>
<p class="lead">- <a href="http://fabacademy.org/archives/2015/eu/students/sanalitro.marco/week10.html">Fabkit</a>; </p>
<p class="lead">- FTDI wire connector (to connect the Fabkit to computer)</p>
<p class="lead">- 2 <a href="http://fabacademy.org/archives/2015/eu/students/sanalitro.marco/week11.html">shield H bridge</a></p>
<p class="lead">- Connector / wire</p>
<p class="lead">- Power supply (replaced with a Battery 12 V)</p>

<p class="lead">I built a simple structure to connect the two dc motors and give more stability; I connected the H bridge shields to Fabkit, dc motors and power source. For consignments problem, I could not use the wi-fi shield for this assignment, for this reason I used the FTDI connector to receive from the computer the “serial command”.</p>

<div class="text-muted"><h3>ARDUINO IDE and PYTHON GUI (Tkinter)</h3></div>

<p class="lead">First I downloaded <a href="https://www.python.org/downloads/">Python 2.7</a> (I chose this version to start because have more forum and tutorial) and I added the <a href="https://docs.python.org/2/library/tkinter.html"> Tkinter</a> library interface at the basic library.</p>

<p class="lead">Using Arduino IDE I wrote the C code; I programmed the microcontroller to read (using the serial port) the signals coming from the interface:</p><p class="lead"><i>if (Serial.available()) {  command = Serial.read();  }</i></p>

<p class="lead">and I imposed on each individual signal a basic command:</p>
<p class="lead">(Forward command example) <i>if (command == 'A'){</i></p>
  <p class="lead"><i>analogWrite(hbridge_in1,150);</i> //input1 dc motor n°1</p>
  <p class="lead"><i>analogWrite(hbridge_in2,0);</i>  //input2 dc motor n°1</p>
  <p class="lead"><i>analogWrite(hbridge_in3,150);</i> //input1 dc motor n°2</p>
  <p class="lead"><i>analogWrite(hbridge_in4,0);</i> //input2 dc motor n°2</p>
<p class="lead"><i>}
</i></p>




<div class="text-muted"><h3>INTERFACE: USING THE INTERFACE TO TALK TO ROBOT</h3></div>


<p class="lead"> Then I wrote in Python the code and the <a href="https://www.dropbox.com/s/30ccpvhb0zvvpe3/inteface_GUI.py?dl=0">GUI Design</a>:</p>

<p class="lead">- Before to start the code I re-called the librarys: </p>
<p class="lead"><i>(example) from Tkinter import *</i></p>
<p class="lead"><i>import serial;</i></p>

<p class="lead">- I defined who’s the “reader/writer” of serial command: </p>
<p class="lead"><i>Fabkit = serial.Serial();</i></p> 

<p class="lead">- Then I defined the serial port and how to read/write the data;</p>

<p class="lead">- I finally set each command. In my case I have 4 types of command:</p>
<p class="lead">1)<i>def serialCTRL():</i>  # to periodically check the connection</p>
    <p class="lead"><i>print("OK")</i></p>
    <p class="lead"><i>dati = arduino.read(1)  </i></p>
   <p class="lead"><i> print(dati)</i></p>
    <p class="lead"><i>window.after(300, serialCTRL) ; </i></p>
<p class="lead">2)<i>def Connect():</i>  # to connect the interface to the board (in my case from Serial port COM4)</p>
    <p class="lead"><i>try:</i></p>
    <p class="lead"><i>global Fabkit  </i></p>
   <p class="lead"><i> Fabkit = serial.Serial("COM4",9600,timeout=0);</i></p>
    <p class="lead"><i>window.after(1000, serialCTRL) ;</i></p>
<p class="lead">3)<i>def Forward (Command): </i>  # to send a signal (Forward command example)</p>
    <p class="lead"><i>try:</i></p>
    <p class="lead"><i>global Fabkit  </i></p>
   <p class="lead"><i> Fabkit.write(Command)</i></p>
    <p class="lead"><i>print "%s" % (Command)</i></p>
    <p class="lead"><i>return;</i></p>



<p class="lead">-I closed the first part: </p>
<p class="lead"><i>window = Tk ()</i></p>
    <p class="lead"><i>var = StringVar();</i></p>

<p class="lead">- Finally in the GUI Design Part I set the graphics interface and the elements that compose it, I assigned to each component the commands described before: </p>
<p class="lead">(Forward command example) <i>button_1 = Button(text="F",command= lambda: Forward('A'), width = 12, borderwidth = 5, relief = GROOVE, bg="#3b5061", fg="white", font=("Helvetica",50)).grid(row=0, column=5)</i></p>
<p class="lead">- To close the code and enable the loop, I wrote: </p>
<p class="lead"><i>window.mainloop();</i></p>
<p class="lead">I created a really simple command interface to control my robot, but I want to go into that and produce a better interface for the final project. I started to study also Processing.
</p>

<h2 class="featurette-heading">Download Files</h2></div>
              <p class="lead">Arduino IDE:</p>
              <p class="lead"><a href="files/Week14/interface_IDE.ino">- interface_IDE.ino</a></p>
              
            <p class="lead">Python GUI:</p>
              <p class="lead"><a href="files/Week14/interface_GUI.py">- interface_GUI.py</a></p>
              
<p class="lead">Programs: IDE Arduino, Python.</p> 
<p class="lead">Machinery: Power Supply.</p>

   

<!--<p class="featurette-image img-responsive pull-right"> <iframe width="1140" height="630" src="https://www.youtube.com/embed/HTyyFYbqHkI" frameborder="0" allowfullscreen></iframe></p>
<!-- <img width="1140" src="img/week11/cover11b.jpg"> -->
<!-- <img class="featurette-image img-responsive pull-right" src="img/week11/i7.jpg">-->


              
                        
                                   
              

              
                  
           </section>
           
        
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <span class="copyright">Copyright &copy; 2015, Marco Sanalitro</span>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline social-buttons">
                        <li><a href="https://twitter.com/SanalitroMarco"><i class="fa fa-twitter"></i></a>
                        </li>
                        <li><a href="https://www.facebook.com/marco.sanalitro.9"><i class="fa fa-facebook"></i></a>
                        </li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline quicklinks">
                        <li>arch.marco.sanalitro@gmail.com
                        </li>
                        
                    </ul>
                </div>
             </div>
        </div>
    </footer>

    

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/agency.js"></script>

</body>

</html>
