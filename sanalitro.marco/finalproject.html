<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>FINAL PROJECT - FAB ACADEMY 2015 - MARCO SANALITRO</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/agency.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="index.html"> 
                <strong>FA15 | MS<strong></a>
                
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a class="page-scroll" href="index.html"#page-top">FA15|MS</a>
                    </li>
                   <li>
                        <a class="page-scroll" href="#introd">Roll.e </a>
                    </li>  
                   <li>
                        <a class="page-scroll" href="#design">Mechanical (&) Desing</a>
                    </li>
                   
                   <li>
                        <a class="page-scroll" href="#electronics">Electronics</a>
                    </li>
                   
                   <li>
                        <a class="page-scroll" href="#programming">Programming</a>
                    </li>
                   
                    <li>
                        <a href="http://www.fabacademy.org/" target="_blank">FAB ACADEMY</a>
                    </li>
                    <li>
                        <a href="http://officinegiardino.org/" target="_blank">FAB LAB Fr</a>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header>
        <div class="container">
        <div class="featurette" id="about">
            
            
            
            
            <div class="intro-text">
                
               <!-- <div> <img width="250" src="img/portfolio/Senza-titolo-2.png">  <H6></H6> </div>-->
                
                <div><p class="featurette-image img-responsive"> <iframe width="574" height="440" src="https://www.youtube.com/embed/8UwryFqUNlM" frameborder="0" allowfullscreen></iframe></p>
           </div>
           
           <div>.</div>
              <div class="intro-lead-in">Final Project</div>
              <a class="page-scroll btn btn-xl"href="index.html" target="_blank"> 
<h1><strong>Fab Academy 2015 - Marco Sanalitro</strong></h1></a>
        
    </header>

   <hr class="featurette-divider">
    <section id="introd" >
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                     
                    <h3 class="section-subheading text-muted"></h3>
                </div>
            </div>
   <img class="featurette-image img-responsive width="1140" src="img/final project/elect.jpg">
   <p class="lead">Roll.e is a telepresence robot system. It can be equipped with a smartphone, camera or FPV system (first person view). Controllable remotely it was designed for business, educational, but also fun.</p>
<p class="lead">The idea is to build an economic and open source robot that can be used for conference calls, research, mapping or a better interaction in remote communication.</p>
<p class="lead">Before starting the project, I did a long search to understand what might be the real applications in everyday life.</p>
<p class="lead">The telepresence robot system existed for several years, allows people who are unable (for health reasons or simply to problems of time, space and money) to travel or attend an event. There are many studies that have been carried out, here an example:, here an example:</p>
<p class="lead"><a href="http://www.ted.com/talks/henry_evans_and_chad_jenkins_meet_the_robots_for_humanity">http://www.ted.com/talks/henry_evans_and_chad_jenkins_meet_the_robots_for_humanity</a></p>
<p class="lead">There are several examples of amateur robot, equipped with cameras, they are used to <p class="lead">reach places inaccessible to humans, here an example:</p>

<p class="lead"><a href="http://2015.officinerobotiche.it/myzharbot/">http://2015.officinerobotiche.it/myzharbot/</a></p>
<p class="lead">With the increasing use of teleconferencing systems, many companies are producing increasingly more innovative systems, here an example:</p>
<p class="lead"><a href="https://revolverobotics.com/">https://revolverobotics.com/</a></p>
 <p class="lead">Roll.e is controlled with a web interface; the Python script and Arduino IDE coding the communication between the board and the Interface.  </p> 
 <p class="lead">The Raspberry Pi 2 read the “controls” and send them to the main board and shield to control the “tower” and the robot. The video is transmitted by cam to web page.  </p>
 
 <p class="lead">STRATEGY</p>
 <p class="lead">I believe that the product is very desirable for the market, but we must reduce production costs and dimensions. I know that building a system on a single product would not work, for this reason I think it would be interesting to collaborate with other firms or project (drones, models for diving).</p>
 
 <p class="lead">The economical strategy can be the following. Keep software and hardware open source, so no income will come from those ones. We can from the other side sell an already made product in case people don’t want to do it by itself. We can also charge for advanced components (hardware / software) that can be implemented in the Robot. If I can involve other projects the system would have a good chance to work.</p>
 <p class="lead">I see it as an instrument that can be implemented according to the need of designers and users. I think that can be used as many proposes:</p>

<p class="lead">- Remote Travelling: travel and visit remote places</p>
<p class="lead">- Mapping tool: creation of 3dimentional Models</p>
<p class="lead">- Science Research: recollection data, by equiping it with sensors</p>
<p class="lead">- Interactive Sanitary Therapy: psychological therapy; Support to other medical therapy</p>
<p class="lead">- Interactive Education</p>
<p class="lead">- Security/Surveillance</p>
<p class="lead">- And much more... </p>
  
    <!-- Design Grid Section -->
    <hr class="featurette-divider">
    <section id="design" >
        <div class="container">
            
            
      <div class="featurette" id="about">
            
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp17.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week12/5.jpg">
            <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/MzG2p3_AzRw" frameborder="0" allowfullscreen></iframe></p>
            <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/2_a2Q1oTUvg" frameborder="0" allowfullscreen></iframe></p>
            <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/E_b_vwRD0W4" frameborder="0" allowfullscreen></iframe></p>
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp8.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week14/f1.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp22.jpg">
           <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/AGqXUMtfpVo" frameborder="0" allowfullscreen></iframe></p>
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp9.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp30.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp21.jpg">
            <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="450" src="https://www.youtube.com/embed/UD4cRbpbNs4" frameborder="0" allowfullscreen></iframe></p>
           
            
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp10.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp11.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp29.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp19.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp20.jpg">
            
            <div>
              <h2 class="featurette-heading">Mechanical (&) DESIGN</h2></div>
            <p class="lead">During the academy, the design of my project is developed according to the knowledge acquired. The final form of the robot I meet many degrees of aesthetic appeal and practicality.</p>
            
            <p class="lead">The soft and thin lines, make it pleasing to the eye, while the webcam is able to "humanize" a little (even if I wanted to put two webcams). This, to attrack the younger market audience.</p>

            <p class="lead">Mobility is the key part of this project, for this reason the robot is equipped with two DC Motors (to move and steer the cart, Recovered from a broken printer), using gears system in PLA 3d printed and two servo, to move the “tower” camera ( PLA 3d printed). The systems will be powered by 5V and 12 V. At the base of the tower it is possible to connect different types of devices: my first idea involves the use of 3d cam and the FPV system, but probably for now I will be using a smartphone or a simple Cam to reduce costs.
The shell is made with composite system and  the internal structure in PLA 3d Printed . <p class="lead">Mechanical cost: 35/40 € (including sheel)</p> </div>

            <p class="lead">The structure and the robot body has been made during the week of composite assignment: </p>
            <p class="lead">The first step was revise and made a new 3D Model of my Robot Roll.e to make the mold on a polyurethan panel ( 600x800x100 mm of which profits 500x600x60 mm).</p>
            
           <p class="lead"> I split the body into two parts to facilitate the process of composite and I started to draw the mold: knowing the height of the tool (3,5 cm from the mandrel to final tool) I could draw some inclined walls, in this way the machinery does not come in contact with the model when milling (similar to the process of molding and casting assignment).</p>
            

<p class="lead">I Imported the .stl file in the Meshcam software and I set the two milling process which are the Roughing (tip 8 mm flat-head) and the Finishing (tip 3.2 round-head).</p>
<p class="lead">Roughing Settings: </p>

<p class="lead">- toolpath diameter: 8 mm endmill; </p>

<p class="lead">- feed rate : 1100 mm; </p>
<p class="lead">- plunge rate: 500; </p>
<p class="lead">- spindle speed: 12000 rpm;</p>
<p class="lead">- stepover: 5 mm.</p>
<p class="lead">- depth per pass: 4 mm.</p>

<p class="lead">Finishing Settings:</p>

<p class="lead">- toolpath diameter: 3,2 mm ballmill; </p>

<p class="lead">- feedrate: 1100 mm;</p>
<p class="lead">- plunge rate: 500 mm;</p>
<p class="lead">- spindle speed: 12000 rpm;</p>
<p class="lead">- stepover: 1,2 mm.</p>
<p class="lead">- depth per pass 1 mm.</p>

<p class="lead">- After the software has calculated the cam, I have saved the two .iso files and have them imported into the milling software Isons.</p>
<p class="lead">- I cleaned the CNC before to put and anchor the polyurethan block because every mm under the material may be a mistake during the process.</p>
<p class="lead">- I set the X,Y (0,0) and the Z-axis home coordinates values and I modified the gcode to start the milling process.</p>
<p class="lead">- After the Roughing and Finishing process i had lightly sanded to complete finishing.</p>

           
            <p class="lead">Wet lay-up is a molding process that combines layers of reinforced fiber with liquid resin to create a high quality laminate. This process involves the positioning of reinforcement material into or against a mold in layers. These layers are then impregnated with a liquid resin system, either with a brush and roller, to ensure a good wet-out of the reinforcement material. The step is repeated until reinforcement thickness is achieved. Curing can be performed at room temperature or under heat, depending on the selection of the resin system. This can be accomplished with the use of a vacuum bagging process.</p>
            
<p class="lead">Equipment, Components and Material: </p>

<p class="lead">- Peel Ply-Plastic Laminate; </p>
<p class="lead">- Holes-Breather; </p>
<p class="lead">- Bleeder;</p>
<p class="lead">- Linen Fabric 200 g/sqm of Bcomp°; </p>
<p class="lead">- Air-Vacuum Bag;</p>

<p class="lead">- Epoxy resin and Hardener (2:1);</p>
<p class="lead">- Release and Wax;</p>
<p class="lead">- Gelcoat and Reagent (100:2);</p>
<p class="lead">- Brush and Roller;</p>
<p class="lead">- Protection: eye, mouth/nose and hands.</p>

<p class="lead"> The ideal ratio between resin and fabric it's 30% resin and 70% fabric. In this specific case, considering the textile material (linen) the ratio considered is 50% resin and 50% linen. The specific weight of linen is 200 grams/square meter. The three layers total area is approximately 0.3 square meter. So, the linen weight is approximately 60 grams. 60 grams of resin are required and considering the ratio 2:1 (resin:hardener) the hardener weight is 60/2 grams equal to 30 grams.</p>

<p class="lead">Proceedings:</p>

<p class="lead">- I Lightly sanded the mold and clean; </p>
<p class="lead">- I cut three pieces of linen of the size of the mold (1 with the texture of fabric at 45 ° to reinforce the composite); </p>
<p class="lead">- I also cut Breather, Bleeder and Peel Ply of the size of the mold (the Breather 3 time the dimension of the mold) ;</p>
<p class="lead">- I Put 2 Coats of Epoxy resiner and Hardener mixture (2:1 ratio) to completely cover the mold; </p>
<p class="lead">- I put 4 Coats of Wax Mold Release each 30 min;</p>
<p class="lead">- I put 3 Layer of Linen fabric and Epoxy resin mixture using brush and roller(quickly), making sure to evenly distribute and cover all parts of the mold( I used some small piece of linen to adjust empty areas);</p>

<p class="lead">- Then I covered using Peel Ply, Bleeder and Breather (where there will be the valve of the air-vacuum I bent breather to have greater absorbing part)in this order;</p>
<p class="lead">- At this point I put it all in the Air-Vacuum bag, I closed the valve anche the bag and I turned on the air pump to created the vacuum;</p>
<p class="lead">- after a night the model was ready to be removed, but The release did not work very well and I had to break the mold;</p>


<p class="lead">Unfortunately the model didn't come as I wanted, I think that during the process wet lay up, I used too little resin; Furthermore the release wax did not work very well, despite the many layers I used.</p>


<p class="lead">For this reason I had to work a lot to fix the the model:</p>
<p class="lead">- I cut the edges and sanded many times to reduce the imperfections; </p>
<p class="lead">- When I got an acceptable and uniform result I put 2 coat of Gelcoat mixture; </p>
<p class="lead">- I Lightly sanded the mold and clean and the end, I have the "body" or "shell" of my robot; </p>
<p class="lead">- After this I used the drill to open the hole on the sheel, for the passage of wires and the positioning of the screws stiffening; </p>   

       
<p class="lead">The design of the mechanical part was not difficult: I used the software Rhino and I used an open software Gearotic 2.0 to generate Gears.</p> 
   <p class="lead">The key points of this design were: studying the joints of all elements (I did some test prints to see how the PLA is dilated extrusion, especially in the system of gear motors craft I invented with only two gear and the pieces that connected to servo motors allow movement of the tower.</p> 
        <p class="lead">I adjusted files and  exported .slt and open every single the file with the software Cura. Basic settings I used:</p>     
            
<p class="lead"> - QUALITY - </p> 
<p class="lead"> LAYER HEIGHT (mm): 0,2</p> 
<p class="lead"> SHEEL THICKNESS (mm): 0,8</p> 
<p class="lead"> - FILL - </p> 
<p class="lead"> BOTTOM/TOP THICKNESS (mm): 0,8</p> 
<p class="lead"> FILL DENSITY (%): 15</p> 
<p class="lead"> - SPEED AND TEMPERATURE - </p> 
<p class="lead"> PRINT SPEED (mm/s): 120</p> 
<p class="lead"> PRINTING TEMPERATURE (°C): 185</p> 
<p class="lead"> BED TEMPERATURE (°C): 0,8</p> 
<p class="lead"> - SUPPORT - </p> 
<p class="lead"> SUPPORT TYPE : TOUCHING BUILDPLATE</p> 
<p class="lead"> PLATFORM ADHESION TYPE : BRIM</p>
<p class="lead"> - FILAMENT - </p> 
<p class="lead"> FILAMENT DIAMETER (mm) : 1,75</p>
<p class="lead"> FILAMENT FLOW (%) : 100</p>
<p class="lead"> - MACHINE - </p> 
<p class="lead"> MACHINE NOZZLE SIZE (mm) : 0,4</p>
<p class="lead"> - RETRACTION - </p> 
<p class="lead"> RETRACTION SPEED (mm/S) : 40</p>
<p class="lead"> RETRACTION DISTANCE (mm) : 4,5</p>
<p class="lead"> - QUALITY (Advanced) -</p> 
<p class="lead"> INITIAL LAYER THICKNESS (mm) : 0,2</p>
<p class="lead"> INITIAL LAYER LINE WIDTH (%) : 100</p>
<p class="lead"> - SPEED (advanced) -</p> 
<p class="lead"> TRAVEL SPEED (mm/s): 150</p>
<p class="lead"> BOTTOM LAYER SPEED (mm/s): 20</p>


<p class="lead">Finished printing the pieces in pla, I assembled all the parts, Including two bases that have been mounted to the internal boards.</p>
<p class="lead">The shell is a bit 'distorted and I'was not had the all 4 wheels on the ground at the same time.</p>
<p class="lead"> To solve this problem, I cuted using the laser cutter a piece of wood, in this way I could straighten the body.</p>
<p class="lead"> Solved this problem, I did 2 day of test, to control everything. All works perfectly!!! </p>
<p class="lead"> The movement of the robot is similar to a tank: to facilitate the movement just add two belts. for the prototype I chose to use regular 4 wheels, but I made a few adjustments:
<p class="lead"> I added the double-sided scotch spongy and a layer of rubber to increase friction of the rear wheels and I added Scotch adhesive smooth, to facilitate the slip of the front wheels.</p>




<div>
<h2 class="featurette-heading">Download Files</h2></div>
             <p class="lead">Rhino and STL for milling "Shell":</p>
              <p class="lead"><a href="https://www.dropbox.com/s/0pmxv088nad0v1t/robot_shell.3dm?dl=0">- robot_shell.3dm</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/ty8myt4c3lu5teq/robot_shell.stl?dl=0">- robot_shell.stl</a></p>
              
              <p class="lead">Rhino model and 3ds:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/5kkak9k4w98l5ww/NEW%20ROBOT.3dm?dl=0">- NEW ROBOT.3dm</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/gwimb5qzsml9pvs/NEW%20ROBOT.3ds?dl=0">- NEW ROBOT.3ds</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/pmxbgzyxxm6of2s/RUOTE%20E%20INGRANAGGI.3dm?dl=0">- Gear and Weels.3ds</a></p>
              <p class="lead">STL for print "Mechanical":</p>
              <p class="lead"><a href="https://www.dropbox.com/s/x07tldaczh7cbvl/BASE%20FABKIT.stl?dl=0">- BASE FABKIT.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/4ifvf22dtbqe48b/BASE%20RASP.stl?dl=0">- BASE RASP.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/19f8hvb9d5rh9cy/big%20gear%20x%202.stl?dl=0">- big gear x 2.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/0xl93w14vb9ywpd/small%20gear%20x%202.stl?dl=0">- small gear x 2.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/0xl93w14vb9ywpd/small%20gear%20x%202.stl?dl=0">- small gear x 2.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/8eoaqz8pf423utp/pivot%20x%204.stl?dl=0">- pivot x 4.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/9zm7cm3pma0e3mq/top%20x%204.stl?dl=0">- top x 4.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/3dpwvx0pf8lgpt5/wheel%20x%204.stl?dl=0">- wheel x 4.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/mhy3forv49lp95a/arms_tower.stl?dl=0">- arms_tower.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/9sd6hfhu6svyum9/base_cam.stl?dl=0">- base_tower.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/n1dfjnxx3b6tcmt/base_tower.stl?dl=0">- base_cam.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/lvdivgel4l2q5jd/tilt_tower.stl?dl=0">- tilt_tower.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/igoaa48m5r03vl1/Blocks_motor%20x%202.stl?dl=0">- Blocks_motor x 2.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/fjvlyoqirpfav9j/Mask_L.stl?dl=0">- Mask_L.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/6jme08yo7gec9vc/Mask_motor_L.stl?dl=0">- Mask_motor_L.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/5gp6c9u47fq8htf/Mask_R.stl?dl=0">- Mask_R.stl</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/uawb262dy2pq95z/Mask_motor_R.stl?dl=0">- Mask_motor_R.stl</a></p>
              
              
<p class="lead">Programs: Rhinoceros, Cura, Meshcam.</p> 
<p class="lead">Machinery: Delta Wasp 40 70, VREL CO2 ME-1300.</p>
              
              
<!-- Electronics Grid Section -->
   <hr class="featurette-divider"> 
    <section id="electronics" >
        <div class="container">
            
            
      <div class="featurette" id="about">
            
            
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp15.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp2.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week10/b5.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week10/b1.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/week10/b2.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp23.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp28.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp4.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp3.jpg">
           
           
            
            <div>
              <h2 class="featurette-heading">Electronics</h2></div>
              
             <p class="lead"> Using a simil Arduino based on <a href="http://www.fabacademy.org/archives/2015/doc/fabkit-0.4.html">Fabkit 0.4</a> I adapted the board to my needs. Then I did the shield to control motors dc and servos control, designed by me. I draw in Eagle the boards and I milled them using Roland monoFab SRM-20 milling machine. Then I soldered each components. I wrote the C code in Arduino IDE and I flashed the board. I used and improved the interface created during the interface assignment. I decided to buy a Raspberry Pi 2 (following the advice of Neil during a revision) to transmit the video at web page and I programmed a script that would allow me to control the robot using a web page (output).</p>
              <p class="lead">Here I found a problem: the communication of Raspberry has a logic of 3.3 V (although it can be supplied with 5V) while the main board has (simil Arduino) a 5V logic. </p>
              <p class="lead">For this reason I decided to build a logic converter, but I found schemes in internet and I realized that to build it would have paid more than getting a board already done: I decided to buy it.</p>
             
<p class="lead">I made a simil Arduino based on <a href="http://www.fabacademy.org/archives/2015/doc/fabkit-0.4.html">Fabkit 0.4</a></p> 
<p class="lead">Board Components:</p>
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/ATMEGA328P-AU/ATMEGA328P-AU-ND/1832260">Atmega 328P</a></p> 
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/AWSCR-8.00CV-T/535-10004-1-ND/2001627">8 MHz external resonator</a></p> 
<p class="lead">- <a href="http://befr.rs-online.com/web/p/tactile-switches/4791508/">Switch Button</a></p> 
<p class="lead">- FTDI Communication</p>
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/C1206C104KARACTU/399-4674-1-ND/992199">2 Unpolarized Capacitors 1206 0.1 uf</a></p>
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/C3216X7R1H105K160AB/445-1423-1-ND/569089">Unpolarized Capacitor 1206 1 uf</a></p> 
<p class="lead">- Electrolytic capacitor 10 uf</p>
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/RC1206FR-0710KL/311-10.0KFRCT-ND/731430">Resistor 1206 10k</a></p> 
<p class="lead">- <a href="http://www.digikey.it/product-detail/it/RC1206FR-07499RL/311-499FRCT-ND/731891">Resistor 1206 499</a></p> 
<p class="lead">- <a href="http://docs-europe.electrocomponents.com/webdocs/04f4/0900766b804f4bbe.pdf">LED YELLOW CLEAR 1206 SMD</a></p> 
<p class="lead">Board cost: 8,12 €</p>
<p class="lead">To write the bootloader I used the IDE from Arduino. It's necessary choose on Tools > Board > Arduino Pro or Pro mini (3.3V, 8) before and press the Reset Button when you are making the booloader</p>
            
            <p class="lead">Drawing the shield in eagle, I realized the need to protect the PCBs, for this reason I decided to design a shield that connects "face to face" with the main board: in this way the components are protected inside. To simplify the programming of the microcontroller board and the connection to the dc motors and servo, I also put sockets on the back of the shield</p>
            <img width="535" src="img/week11/cover11c.jpg">
            <p class="lead">To control direction and speed of rotation of the motors I used two H bridge. I studied the datasheet of the components to understand how this works: 
it is possible to reverse the polarity (and therefore the rotation) using an internal switch. The component also allows the entrance the 12 V necessary for the functioning of the dc motors.</p>
            
            <p class="lead">Shield Components:</p>
<p class="lead">- 2 H Bridge  </p>
<p class="lead">- 6 PCB connector CMM5-2 </p>
<p class="lead">- 3 Female Header 8 pin </p>
<p class="lead">- 2 Electrolytic Capacitor 10 uf ]</p>
<p class="lead">- Unpolarized Capacitor 1206 0.1 uf </p>
<p class="lead">- Resistor 1206 0 </p>
<p class="lead">- Voltage regulator  ncp1117 sot 223  </p>
<p class="lead">Shield cost: 8 €</p>
<p class="lead">The control of the robot will be with wire(only for the prototype): in a second fase, I would add a wifi shield control.</p>

<p class="lead">milled, soldered and checked with the tester the boards, I could do the first tests with the codes: I realized that unfortunately some pins were defective (they could not get consistently instructions) for this reason I was forced to use two jumpers (luckily I had planned the double face shield, this did not result in changes on the board).
                
<p class="lead">Then I had another problem: I read many forums arduino and I talked with some colleagues, everyone told me the servo motor operates using PWM pin, but instead I found out that they need to analog read pin, fortunately, the change has been very easy to do.</p>

<p class="lead">Having available all parts of the "circuit" I was able to wire the entire system according with datasheets and my scheme. To make this easier, I screwed inside the robot base of support for all cards.</p>

<p class="lead">Unfortunately, the many errors are due to the little time and some of my distractions, but in the end everything was adjusted and worked perfectly.</p>

<p class="lead">It was an excellent opportunity to study some issues that I have always loved.</p>

<h2 class="featurette-heading">Download Files</h2></div>
              <p class="lead">Eagle:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/hvc9dl9wpg3cisw/fabkit_modif.sch?dl=0">- fabkit_modif.sch</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/f2xnubl845pvf3a/fabkit_modif.brd?dl=0">- fabkit_modif.brd</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/hs8nxevb0mvany0/shield.sch?dl=0">- shield.sch</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/2hg3g6rxxagnhd0/shield.brd?dl=0">- shield.brd</a></p>
              
              <p class="lead">PNG:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/ondt7o5eucvgie2/fabkit_modif_traces.png?dl=0">- fabkit_modif_traces.png</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/eycc7y5uwvq5iwj/fabkit_modif_holes.png?dl=0">- fabkit_modif_holes.png</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/ondrqn0ltfv7gqb/fabkit_modif_interior.png?dl=0">- fabkit_modif_interior.png</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/euu1iuixrai6jwm/shield_traces.png?dl=0">- shield_traces.png</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/e4zzrvmqjn5yhy8/shield_holes.png?dl=0">- shield_holes.png</a></p>
              <p class="lead"><a href="https://www.dropbox.com/s/nfhwsh0tyjzwxdq/shield_interior.png?dl=0">- shield_interior.png</a></p>
              
              
<p class="lead">Programs: Eagle, Photoshop, IDE Arduino.</p> 
<p class="lead">Machinery: Roland SRM-20.</p>      
            
<!-- Programming Grid Section -->
  <hr class="featurette-divider">  
    <section id="programming" >
        <div class="container">
            

<div class="featurette" id="about">
            
            
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp24.jpg">
            <img class="featurette-image img-responsive pull-right" src="img/final project/fp27.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp1.jpg">
           <img class="featurette-image img-responsive pull-right" src="img/final project/fp25.jpg">
           <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="550" src="https://www.youtube.com/embed/_I9gtU4J6QA" frameborder="0" allowfullscreen></iframe></p>
            <p class="featurette-image img-responsive pull-right"> <iframe width="574" height="550" src="https://www.youtube.com/embed/vM5fc201jTE" frameborder="0" allowfullscreen></iframe></p>
           
           
            
            <div>
              <h2 class="featurette-heading">Programming</h2></div>
              
              <p class="lead">During the course and the assignments I learned how to code with Arduino IDE and (really beginner) with Python. For the final project I wanted to take another step forward.</p>
              <p class="lead">I decided to buy a Raspberry Pi 2 (following the advice of Neil during a revision) to use a webcam as input and I programmed a script that would allow me to control the robot using a web page (output).</p>
              <p class="lead">The Python script and Arduino IDE coding the communication between the board and the Interface. The Raspberry Pi 2 read the “controls” and send them to the main board and shield to control the “tower” and the robot. The video is transmitted by cam to web page.  </p>
              
             <p class="lead"> with the "design" the sketch to program the microcontroller of the main board. I used Arduino IDE:</p>
              
              <p class="lead">I started using Arduino IDE and I wrote the C code; I programmed the microcontroller to read (using serial port) the signals coming from the interface:</p>
              <p class="lead"><i>if (Serial.available()) {  command = Serial.read();  }</i></p>

<p class="lead">and I imposed on each individual signal a basic command:</p>
<p class="lead">(Forward command example) <i>if (command == 'U'){</i></p>
  <p class="lead"><i>analogWrite(hbridge_in1,250);</i> //input1 dc motor n°1</p>
  <p class="lead"><i>analogWrite(hbridge_in2,0);</i>  //input2 dc motor n°1</p>
  <p class="lead"><i>analogWrite(hbridge_in3,250);</i> //input1 dc motor n°2</p>
  <p class="lead"><i>analogWrite(hbridge_in4,0);</i> //input2 dc motor n°2</p>
<p class="lead"><i>}
</i></p>              
              <p class="lead">Using (the many) online forums of Raspberry and studying short tutorials on youtube (during the explanation, I linked ones I used mainly) I configured the board and I did a python script that can read the commands from the web and send them to the main board microcontroller.  </p>
              
            <p class="lead">First of all I used Noob (the operating system install manager) to install the operating system on the Raspberry Pi SD card. I choose Raspbian, a Debian-based distribution optimized for the Raspberry Pi, as it's well documented and widely used.</p>

<p class="lead">As I work with a laptop and don't have any extra keyboard or monitor, my first task was to activate remote access. In order to do this, I enabled the SSH server from the Raspberry configuration menu. With the SSH server enabled it's possible to connect to a remote computer, accessing the bash shell as begining in front of the computer itself, withoutmonitor/keyboard or mouse.</p>

<p class="lead">So i installed Apache 2 (apt-get it) and discovered that the SFTP server was already running (it's a feature "included" in the SSH server) so i drop out the use of FTP for file trasfert&editing.</p>

<p class="lead">As soon as i have tried to modify the default index page i found my first problem: The linux permission. I lost a lot of time trying to figure out what to do.

In the end I find this solution:</p>

<p class="lead">-Create a new user group (E.G. "upload")</p>
<p class="lead">-Add my user to the newborn group</p>
<p class="lead">-Use chown to set the www directory (aka the web base) has owned by the "upload" group.</p>

<p class="lead"><a href="http://ubuntuforums.org/showthread.php?t=1562419&p=9774644#post9774644">(source: http://ubuntuforums.org/showthread.php?t=1562419&p=9774644#post9774644)</a></p>

<p class="lead">I had to repeat that also for the Cgi-Bin directory, the one in with python script may be executed.</p>

<p class="lead">I was not very sure if this is the better solution, but in this stage of my project development security issues were not so important.
In the future I will have to learn about unix server management, but it's an hard task, and better time will come to do that.</p>

<p class="lead">So i got my personal pocket webserver online, and i was able to start coding.
I studied python during fab-academy, but never approach to web development (the so called cgi scripts).</p>

<p class="lead">Fortunately in python there is a library (or better to say, a module) for everything, so i started making a first "try" script, to assure everything was working as i expected.</p>

<p class="lead">The idea is simple:
There is an HTML page with a form that, using the "POST" method, pass some arguments to the python script with output them to the Fabkit, via serial port.</p>

<p class="lead">Add the www-data account to dialout group, to make the serial accessible for the python script</p>
<p class="lead"><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=32&t=40693">(source: https://www.raspberrypi.org/forums/viewtopic.php?f=32&t=40693)</a></p>

<p class="lead">Trick to use an image as a button in html: <a href="http://stackoverflow.com/a/23016230">(source:http://stackoverflow.com/a/23016230)</a>
It would be better to use div instead of table to make the html front end, but I did not have much time.</p>

<p class="lead">When HTML ad Python exange data, using the get method, there is no need to worry about the sent string leght.Instead, when comunicating via serial port is mandatory to have fixed messages leght.
This happens becouse of the buffer. When the MCU receive serial data it puts them into the buffer, a special portion of the RAM, so the user can use function like Serial.read on Arduino to get them in a variable whenever is needed.</p>
<p class="lead">Serial communication mean to send data byte per byte, one after another. So, for example, if we are sending the string "Ciao" we are actually sending a byte for the letter "C", one for the letter "i", ecc.
If we read the buffer before the last character is received we will find a truncated string, so the command parsing will not work.
A good way to avoid this is to check for a terminator character, such as the line feed, to be sure the string is fully received.
A easier way (if we don't need to send long data) is to limit them to a certain amount of data, such as one single byte.
In this case i choose the easy way, sending only a single byte with an integer number. This limits the possible combination to 256 (2^8) enough for this project's need.
Each number have a meaning for the at-mega firmware, and it respond to an action.</p>

<p class="lead">Read example: When html post U, python send 1 via serial to the at-mega328 p (microcontroller), so the robots move forward</p>
<p class="lead">Movement - HTML Post Code- Arduino Code:</p>
<p class="lead">- Forward - U - 1</p>
<p class="lead">- Backwards - D - 2</p>
<p class="lead">- Turn Left - L - 3</p>
<p class="lead">- Turn Right - R - 4</p>
<p class="lead">.Turret handling.</p>
<p class="lead">- Spin right - CCW - 5</p>
<p class="lead">- Spin left - Cw - 6</p>
<p class="lead">- Tilt up - TU - 7</p>
<p class="lead">- Tilt down - TD - 8</p>
<p class="lead">- Reset - H - 9.
</p>

<p class="lead">It was very interesting to study the communication between various systems of code, I hope to explore this topic.</p>
<p class="lead">After programming the main board with Arduino Ide using FabISP, I tested the Interface from PCs and smartphones to understand how much there was delay between command and execution.</p>

            
<p class="lead">Unfortunately I have not found a way to integrate an html page to send the video streaming and the another page html (with a "form" that uses "post" method) to send at python script the robots commands on a single page html.</p>
                
<h2 class="featurette-heading">Download Files</h2></div>
              <p class="lead">Arduino IDE:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/cg2t3ma94nve6h4/IDE_ROBOT.ino?dl=0">- IDE_ROBOT.ino</a></p>
              
            <p class="lead">Python:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/ekmfy3ci3lrg6ze/try.cgi?dl=0">- try.cgi</a></p>
              
            <p class="lead">html interface and images:</p>
              <p class="lead"><a href="https://www.dropbox.com/s/3z01s1wkqk1j9wb/index.html?dl=0">- index.html</a></p>  
              <p class="lead"><a href="https://www.dropbox.com/sh/s7w6ry9gwqledz8/AAAXClZgl3--sMzGFVeBiq0qa?dl=0">- buttons png</a></p> 
              
<p class="lead">Programs: IDE Arduino, Python, Html, Apache 2, Motion Camera.</p> 



    <!-- About Section -->
    

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <span class="copyright">Copyright &copy; 2015, Marco Sanalitro</span>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline social-buttons">
                        <li><a href="https://twitter.com/SanalitroMarco"><i class="fa fa-twitter"></i></a>
                        </li>
                        <li><a href="https://www.facebook.com/marco.sanalitro.9"><i class="fa fa-facebook"></i></a>
                        </li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline quicklinks">
                        <li>arch.marco.sanalitro@gmail.com
                        </li>
                        
                    </ul>
                </div>
             </div>
        </div>
    </footer>


    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/agency.js"></script>

</body>

</html>
